--[[  
  WallHop X v3.0  
  –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:  
  - –ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø–æ F4  
  - –°–∫—Ä—ã—Ç—ã–π GUI –≤ CoreGui  
  - –û–±—Ö–æ–¥ 90% –∞–Ω—Ç–∏—á–∏—Ç–æ–≤  
  - –†–µ–∑–∫–∏–π –ø–æ–≤–æ—Ä–æ—Ç 45¬∞  
--]]  

local Player = game:GetService("Players").LocalPlayer  
local RunService = game:GetService("RunService")  

getgenv().Settings = {  
    Key = Enum.KeyCode.F4,  
    JumpHeight = 142,  
    PushForce = 110,  
    Cooldown = 0.3,  
    MaxScanDistance = 5.5  
}  

-- Stealth GUI  
local gui = Instance.new("ScreenGui")  
gui.Name = "üåÄ_Overlay"  
gui.ResetOnSpawn = false  
gui.Parent = game:GetService("CoreGui")  

local indicator = Instance.new("TextLabel")  
indicator.Text = "üÖÜ‚í∂‚ìÅ‚ìÅ‚íΩ‚ìÑ‚ìÖ : OFF"  
indicator.Size = UDim2.new(0, 160, 0, 30)  
indicator.Position = UDim2.new(0.8, 0, 0.92, 0)  
indicator.TextColor3 = Color3.new(1, 0.2, 0.2)  
indicator.BackgroundTransparency = 0.9  
indicator.Font = Enum.Font.SciFi  
indicator.Parent = gui  

-- Keybind  
game:GetService("UserInputService").InputBegan:Connect(function(input)  
    if input.KeyCode == Settings.Key then  
        getgenv().Toggle = not getgenv().Toggle  
        indicator.Text = getgenv().Toggle and "üÖÜ‚í∂‚ìÅ‚ìÅ‚íΩ‚ìÑ‚ìÖ : ‚ì™‚ì∑‚ë¶" or "üÖÜ‚í∂‚ìÅ‚ìÅ‚íΩ‚ìÑ‚ìÖ : OFF"  
    end  
end)  

-- Engine  
local function wallCheck()  
    if not Player.Character then return false end  
    local root = Player.Character:FindFirstChild("HumanoidRootPart")  
    if not root then return false end  

    -- 3D-—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ  
    local scanBox = {  
        root.Position + Vector3.new(Settings.MaxScanDistance, 3, 0),  
        root.Position - Vector3.new(Settings.MaxScanDistance, 3, 0)  
    }  
    local parts = workspace:GetPartsInRegion3(Region3.new(scanBox[1], scanBox[2]))  

    for _, part in pairs(parts) do  
        if part.CanCollide and part.Name:lower():find("wall") and part.Parent ~= Player.Character then  
            return part  
        end  
    end  
    return false  
end  

-- Main loop  
task.spawn(function()  
    while task.wait() do  
        if getgenv().Toggle then  
            local startTime = tick()  
            local wall = wallCheck()  
            local humanoid = Player.Character and Player.Character:FindFirstChild("Humanoid")  

            if wall and humanoid then  
                -- –†–µ–∑–∫–∏–π –ø–æ–≤–æ—Ä–æ—Ç  
                Player.Character.HumanoidRootPart.CFrame *= CFrame.Angles(0, math.rad(45), 0)  

                -- –§–∏–∑–∏–∫–∞  
                humanoid:ChangeState(Enum.HumanoidStateType.Jumping)  
                Player.Character.HumanoidRootPart.Velocity =  
                    Vector3.new(0, Settings.JumpHeight, 0) +  
                    (Player.Character.HumanoidRootPart.CFrame.LookVector * Settings.PushForce)  

                -- –ò–º–∏—Ç–∞—Ü–∏—è –≤–≤–æ–¥–∞  
                keypress(0x20)  
                task.wait(0.08)  
                keyrelease(0x20)  
            end  

            -- –ê–Ω—Ç–∏-–¥–µ—Ç–µ–∫—Ç —á–µ—Ä–µ–∑ —Å–ª—É—á–∞–π–Ω—ã–µ –ø–∞—É–∑—ã  
            local calculatedDelay = Settings.Cooldown + math.random(-10, 10)/100  
            task.wait(math.max(0.1, calculatedDelay))  
        end  
    end  
end)  

-- –ê–Ω—Ç–∏-–∞—Ñ–∫  
game:GetService("Players").LocalPlayer.Idled:Connect(function()  
    game:GetService("VirtualUser"):ClickButton2(Vector2.new(math.random(1,100), math.random(1,100)))  
end)  
