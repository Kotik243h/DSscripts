local Player = game:GetService("Players").LocalPlayer
local RunService = game:GetService("RunService")
local UIS = game:GetService("UserInputService")

-- –§–∏–∫—Å –¥–ª—è GUI
local gui = Instance.new("ScreenGui")
gui.Name = "WallhopGUI"
gui.Parent = Player:WaitForChild("PlayerGui")

local button = Instance.new("TextButton")
button.Text = "WALLHOP: OFF"
button.Size = UDim2.new(0, 150, 0, 50)
button.Position = UDim2.new(0.5, -75, 0, 10)
button.Parent = gui

local toggle = false
local lastJump = 0
local cooldown = 0.3
local force = Vector3.new(0, 130, 0)

button.MouseButton1Click:Connect(function()
    toggle = not toggle
    button.Text = "WALLHOP: " .. (toggle and "ON üöÄ" or "OFF")
end)

RunService.Stepped:Connect(function()
    if toggle and Player.Character then
        local humanoid = Player.Character:FindFirstChild("Humanoid")
        local root = Player.Character:FindFirstChild("HumanoidRootPart")
        
        if humanoid and root and (tick() - lastJump) > cooldown then
            -- –ò—â–µ–º —Å—Ç–µ–Ω—ã –ø–æ –±–æ–∫–∞–º —á–µ—Ä–µ–∑ Overlap
            local params = OverlapParams.new()
            params.FilterDescendantsInstances = {Player.Character}
            params.FilterType = Enum.RaycastFilterType.Blacklist
            
            local rightPos = root.Position + root.CFrame.RightVector * 3.5
            local leftPos = root.Position - root.CFrame.RightVector * 3.5
            
            local rightParts = workspace:GetPartsInPart(Overlap.new(rightPos, Vector3.new(0.5, 5, 0.5), params))
            local leftParts = workspace:GetPartsInPart(Overlap.new(leftPos, Vector3.new(0.5, 5, 0.5), params))
            
            if #rightParts > 0 or #leftParts > 0 then
                -- –ê–≤—Ç–æ–ø–æ–≤–æ—Ä–æ—Ç –Ω–∞ 45¬∞
                local angle = #rightParts > 0 and -45 or 45
                root.CFrame = root.CFrame * CFrame.Angles(0, math.rad(angle), 0)
                
                -- –ü—Ä—ã–∂–æ–∫ + —Ç–æ–ª—á–æ–∫
                humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
                root.Velocity = force + root.CFrame.LookVector * 80
                lastJump = tick()
                
                -- –§–∏–∫—Å –¥–ª—è –∞–Ω—Ç–∏—á–∏—Ç–æ–≤ (–∏–º–∏—Ç–∞—Ü–∏—è —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞)
                task.spawn(function()
                    game:GetService("VirtualInputManager"):SendKeyEvent(true, Enum.KeyCode.Space, false, nil)
                end)
            end
        end
    end
end)
